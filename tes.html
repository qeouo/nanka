<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta charset="utf-8">
</head>
<body >
	<canvas id="c" width=512 height=256 style="border:solid 1px black;"></canvas>
</body>
<script type="text/javascript">
var ei = function(res,theta){
	res[0] = Math.cos(theta);
	res[1] = Math.sin(theta);
}
hz = 44100;
var data= new Array(hz);
var result= new Array(1024);
var testhz = 110;
for(var i=0;i<hz;i++){
	data[i] = (i%(hz/testhz)*2<(hz/testhz))?1:-1;
	//data[i] = Math.sin(2*Math.PI*(i/hz)*testhz);
}

var e = new Array(2);
for(var i=0;i<1024;i++){
	result[i] = new Array(2);
	result[i][0] =0;
	result[i][1] =0;
	for(var j=0;j<hz;j++){
		ei( e,-2*Math.PI*(j/hz*i));
		result[i][0] += data[j]*e[0];
		result[i][1] += data[j]*e[1];
	}
	result[i][0]/=hz; 
	result[i][1]/=hz;
	result[i][0] = Math.sqrt(result[i][0]*result[i][0] + result[i][1]*result[i][1]);
}

var ctx=document.getElementById("c").getContext("2d");
ctx.strokeStyle="orange";
for(var i=0;i<512;i++){
	ctx.fillRect(i,256-result[i][0]*256
			,1,result[i][0]*256);
}
ctx.beginPath();
ctx.moveTo(0,-data[0]*128+128);
for(var i=0;i<512;i++){
	ctx.lineTo(i,-data[i]*128+128);
}
ctx.stroke();
ctx.closePath();
console.log(result);


</script>
