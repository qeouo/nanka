<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta charset="utf-8">
<title>between</title>
</head>
<style>
canvas{
	border:solid 1px black;

}
</style>
<body onload="start();">
<div id="fps"></div>
<canvas id="canvas" width="300" height="300">
</canvas>
<span style="display:none;" id="vshader">
attribute vec3 pos;
attribute vec4 vertColor;
varying lowp vec4 vColor;
void main(void){ gl_Position = vec4(pos, 1.0); vColor = vertColor;}
</span>
<span style="display:none;" id="fshader">
varying lowp vec4 vColor;
void main(void){ gl_FragColor = vColor ; }
</span>
</body>
<script type="text/javascript">
"use strict"
var gl;
var posVAttrib;
var colattrib;

function start()
{
  var canvas = document.getElementById('canvas');

  initGL(canvas);
  if(gl){
    initShader();

    gl.clearColor(0.0, 0.0, 0.0, 1.0);
	gl.clearDepth(1.0);
	gl.enable(gl.DEPTH_TEST);
	gl.depthFunc(gl.LEQUAL);
    gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER);

    drawScene();
  }
}

function initGL(canvas){
  gl = null;

  try{
    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
  }
  catch(e){
  }

  if(!gl){
    alert('Unable to Initialize WebGL.');
  }
}

function initShader()
{
  // Vertex shader
  var vshader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(vshader, document.getElementById("vshader").textContent);
  gl.compileShader(vshader);
  if(!gl.getShaderParameter(vshader, gl.COMPILE_STATUS)){
    alert(gl.getShaderInfoLog(vshader));
    return;
  }

  // Fragment shader
  var fshader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(fshader, document.getElementById("fshader").textContent);
  gl.compileShader(fshader);
  if(!gl.getShaderParameter(fshader, gl.COMPILE_STATUS)){
    alert(gl.getShaderInfoLog(fshader));
    return;
  }

  // Create shader program
  var program = gl.createProgram();
  gl.attachShader(program, vshader);
  gl.attachShader(program, fshader);
  gl.linkProgram(program);
  if(!gl.getProgramParameter(program, gl.LINK_STATUS)){
    alert(gl.getProgramInfoLog(program));
    return;
  }
  gl.useProgram(program);

  // attribute
  posVAttrib = gl.getAttribLocation(program, 'pos');
  colattrib = gl.getAttribLocation(program, 'vertColor');
  gl.enableVertexAttribArray(posVAttrib);
  gl.enableVertexAttribArray(colattrib);
}

function drawScene(){
  var vertexColors = new Float32Array(4*3);
  var vertexPoses = new Float32Array(3*3);
  vertexColors[0]=1;
  vertexColors[1]=0;
  vertexColors[2]=0;
  vertexColors[3]=1;
  vertexColors[4]=0;
  vertexColors[5]=1;
  vertexColors[6]=0;
  vertexColors[7]=1;
  vertexColors[8]=0;
  vertexColors[9]=0;
  vertexColors[10]=1;
  vertexColors[11]=1;

  vertexPoses[0]=0.0;
  vertexPoses[1]=0.4;
  vertexPoses[2]=0.0;
  vertexPoses[3]=-0.4;
  vertexPoses[4]=-0.4;
  vertexPoses[5]=0.0;
  vertexPoses[6]=0.4;
  vertexPoses[7]=-0.4;
  vertexPoses[8]=0.0;

  var vertcol= gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertcol);
  gl.bufferData(gl.ARRAY_BUFFER, vertexColors, gl.STATIC_DRAW);
  gl.vertexAttribPointer(colattrib, 4, gl.FLOAT, false, 0, 0);

  var buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.bufferData(gl.ARRAY_BUFFER, vertexPoses, gl.STATIC_DRAW);
  gl.vertexAttribPointer(posVAttrib, 3, gl.FLOAT, false, 0, 0);

  gl.drawArrays(gl.TRIANGLES, 0, 3);

 
  gl.bindBuffer(gl.ARRAY_BUFFER, vertcol);
  vertexColors[0]=1;
  vertexColors[1]=1;
  vertexColors[2]=1;
  vertexColors[3]=1;
  vertexColors[4]=1;
  vertexColors[5]=1;
  vertexColors[6]=1;
  vertexColors[7]=1;
  vertexColors[8]=1;
  vertexColors[9]=1;
  vertexColors[10]=1;
  vertexColors[11]=1;
  gl.bufferData(gl.ARRAY_BUFFER, vertexColors, gl.STATIC_DRAW);
  gl.vertexAttribPointer(colattrib, 4, gl.FLOAT, false, 0, 0);

  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  vertexPoses[0]+=0.2
  vertexPoses[2]-=0.2
  vertexPoses[3]+=0.2
  vertexPoses[5]+=0.2
  vertexPoses[6]+=0.2
  vertexPoses[8]+=0.2
  gl.bufferData(gl.ARRAY_BUFFER, vertexPoses, gl.STATIC_DRAW);

  gl.drawArrays(gl.TRIANGLES, 0, 3);
  gl.flush();
}
</script>
